[
  {
    "objectID": "External_Server_Guide.html",
    "href": "External_Server_Guide.html",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "",
    "text": "The User will be able to connect to the external server using NoMachine client access: see Section 8.4 for details on installation and use.\n\n\n\n\n\nThe first password delivered must be changed at the first login.\nAfter 60 days the password will expire: the login window will show new password\nThe passwords to be specified must meet the requirements described in Section 8.3.\n\n\n\n\nOnce you start NoMachine, these are the first three screens you will see:\n\n\n\n\nSelect the “Kickoff Application Launcher” menu (in the lower left corner):\n\n\n\n\nThen you should:\n\n\nClick on the “Applications” button\nSelect “BPLIM” and click on your project (i.e., “pxxx_name”). At this stage, you should see a graphical environment (‘Dolphin’ application1) like this:\n\n\nYou can see the prompt command line together with ‘Dolphin’ using the keyboard shortcut ‘F4’.\n\n\nFiles with the \"sh\" extension allow you to send commands to your operating system or to enter your operating system for interactive use (for example, the file xstata17mp.sh will launch the graphical version of Stata 17). You can start the application by double-clicking the file name in ‘Dolphin’2 or by typing in the Terminal xstata17mp.sh\n\n\n\nThe directories that you have access to within the folder include:\n\n\n\n\n\n\n\n\ninitial_dataset\nData sources provided by BPLIM.\nYou have read-only access to this directory.\n\n\ninitial_dataset/modified\nModified data provided by BPLIM.\n\n\nresults\nOutput files that researchers wish to generate and extract from the server.\nYou have read-write access to this directory.\n\n\ntools\nSpecific analysis tools.\nYou have read-only access to this directory.\n\n\nwork_area\nTemporary work directory.\nYou have read-write access to this directory.\n\n\n/bplimext/doc/Manuals\nManuals and auxiliary files are available here.\n\n\n\n\nYou will have in your work_area folder templates for both Stata and R(R.sh). By default, the template file is read-only.\n\n\nTo reset and disconnect the remote desktop connection or session, you can simply log out of your remote session, as shown in the screenshot below. After you log out, close the window.3\n\n\nConfirm before exiting by clicking on the “Logout” button to close the window:4\n\n\nIn case you do not logout, your session will be left open until your next login. You may use this facility to run your programs. However, one must be aware that this option uses resources from the server, so the efficient solution to run your programs “overnight” is using the batch mode as described in Step 6 below. Furthermore, in case the server is rebooted during a maintenance procedure, your session will be automatically closed, and unsaved documents will be lost. We recommend you save at regular intervals your statistical programs."
  },
  {
    "objectID": "External_Server_Guide.html#upon-access-approval",
    "href": "External_Server_Guide.html#upon-access-approval",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "",
    "text": "The User will be able to connect to the external server using NoMachine client access: see Section 8.4 for details on installation and use."
  },
  {
    "objectID": "External_Server_Guide.html#password-policy",
    "href": "External_Server_Guide.html#password-policy",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "",
    "text": "The first password delivered must be changed at the first login.\nAfter 60 days the password will expire: the login window will show new password\nThe passwords to be specified must meet the requirements described in Section 8.3."
  },
  {
    "objectID": "External_Server_Guide.html#first-steps",
    "href": "External_Server_Guide.html#first-steps",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "",
    "text": "Once you start NoMachine, these are the first three screens you will see:\n\n\n\n\nSelect the “Kickoff Application Launcher” menu (in the lower left corner):\n\n\n\n\nThen you should:\n\n\nClick on the “Applications” button\nSelect “BPLIM” and click on your project (i.e., “pxxx_name”). At this stage, you should see a graphical environment (‘Dolphin’ application1) like this:\n\n\nYou can see the prompt command line together with ‘Dolphin’ using the keyboard shortcut ‘F4’.\n\n\nFiles with the \"sh\" extension allow you to send commands to your operating system or to enter your operating system for interactive use (for example, the file xstata17mp.sh will launch the graphical version of Stata 17). You can start the application by double-clicking the file name in ‘Dolphin’2 or by typing in the Terminal xstata17mp.sh\n\n\n\nThe directories that you have access to within the folder include:\n\n\n\n\n\n\n\n\ninitial_dataset\nData sources provided by BPLIM.\nYou have read-only access to this directory.\n\n\ninitial_dataset/modified\nModified data provided by BPLIM.\n\n\nresults\nOutput files that researchers wish to generate and extract from the server.\nYou have read-write access to this directory.\n\n\ntools\nSpecific analysis tools.\nYou have read-only access to this directory.\n\n\nwork_area\nTemporary work directory.\nYou have read-write access to this directory.\n\n\n/bplimext/doc/Manuals\nManuals and auxiliary files are available here.\n\n\n\n\nYou will have in your work_area folder templates for both Stata and R(R.sh). By default, the template file is read-only.\n\n\nTo reset and disconnect the remote desktop connection or session, you can simply log out of your remote session, as shown in the screenshot below. After you log out, close the window.3\n\n\nConfirm before exiting by clicking on the “Logout” button to close the window:4\n\n\nIn case you do not logout, your session will be left open until your next login. You may use this facility to run your programs. However, one must be aware that this option uses resources from the server, so the efficient solution to run your programs “overnight” is using the batch mode as described in Step 6 below. Furthermore, in case the server is rebooted during a maintenance procedure, your session will be automatically closed, and unsaved documents will be lost. We recommend you save at regular intervals your statistical programs."
  },
  {
    "objectID": "External_Server_Guide.html#keep-your-home-area-tidy",
    "href": "External_Server_Guide.html#keep-your-home-area-tidy",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "2.1 Keep your home area tidy",
    "text": "2.1 Keep your home area tidy\n\nDo not save files in your home area /home/USER_LOGIN. In case you exceed its size you will not be able to login.\nCheck regularly the size of your project on the harddrive. Open a Terminal and apply the following steps:\n\n\nMove to the project folder: cd /bplimext/projects/p000_xxx_yyy/\nList project size: du -h\nCheck size by folder and list folders with at least 1Gb: du --max-depth 1 -h | sort -n | grep G\nMove to the folder ‘work_area’: cd work_area\nRepeat the check in this folder: du --max-depth 1 -h | sort -n | grep G\nIdentify duplicated and temporary files and delete them: use the command rm\nCompress big files/folders you are not using at the moment:\n\n\nCompress folders: tar -zcvf YOUR_FOLDER.tar.gz YOUR_FOLDER\nCompress individual files: gzip YOUR_FILE"
  },
  {
    "objectID": "External_Server_Guide.html#using-the-terminal",
    "href": "External_Server_Guide.html#using-the-terminal",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "2.2 Using the Terminal",
    "text": "2.2 Using the Terminal\nLinux’s Terminal is a command-line interpreter. You can use the ‘shell’ for a wide range of tasks, including searching files and files’ contents, organizing your working space, and, most importantly, running your programs in batch mode.\n\nLinux’s Terminal can be accessed from5\n\nRedHat &gt; Applications &gt; System &gt; Terminal\n\n\nSee Section 8.1 for a list of some of the most used commands.\nIf you use a non-English keyboard, the ‘true’ keyboard might be different from the one you see. The changes apply mostly to the symbols, not letters or numbers. For example, in case you have a Portuguese keyboard on your computer the ‘+’ is now in key ‘?’, or the ‘*’ is in SHIFT + ?. This issue is specific to the Operating System of your computer\nRemember that Linux is case-sensitive: e.g., “LS” and “ls” are treated as different commands.\nYou can use the arrow keys to scroll up and down through the commands you have entered.\nYou can use the “Tab” key to complete the command line automatically.\ne.g., type the following line to list elements within a folder in a ‘human-readable’ format, h, long list format, l, in reverse order, r, sort by modification time, t, and almost all files, A,\nls -lArth"
  },
  {
    "objectID": "External_Server_Guide.html#stata",
    "href": "External_Server_Guide.html#stata",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "3.1 Stata",
    "text": "3.1 Stata\nStata versions available in the server: 15, 16 and 17 (adjust the following lines to the Stata version you want to use)\n\nStata can be accessed in interactive graphical or non-graphical modes.6\n\n\nInteractive non-graphical mode\nMove to the desired folder, e.g.,\ncd /bplimext/projects/I001_jdoe/\nand type\nstata17-mp\n\n\n\nYou may add a ‘PATH’ to your system folder by typing, for example on Stata 16, the following command in the shell “vi ~/.bash_profile” and adapt the following line\nPATH=$PATH:$HOME/.local/bin:$HOME/bin:/opt/bplimext/stata17\nFor the interactive graphical mode click on the icons “xstata17mp.sh” (Stata 17) located in the ‘desktop’, depending on the desired Stata version,\n\n\n\n\nYou can use the ‘Do-file Editor’ in Stata to create your own “do-files” and “ado-files”, or you can use KWrite editor (or ‘gedit’)\nYou can open it from RedHat &gt; Applications &gt; Utilities &gt; KWrite. You can also launch ‘KWrite’ from the ‘shell’ by typing ‘kwrite’\nIn case the Stata’s icon is not on your desktop, use Dolphin, move to the folder ‘/bplimext/scripts/wrappers/’, and drag and drop the file ‘xstata17-mp’ into the desktop\n\n\nNOTE: to start Stata use the shortcuts in your project’s folder.\n\nTo look for “ado-files”:\n\n“Ado-files” are text files containing the Stata program. It is advisable that one create and save his/her “ado-files” so the results can be replicated later by running the saved “ado-files” on the BPLIM’s datasets.\nStata looks for “ado-files” in several places. When it comes to personal ado-directories, they can be categorized in four ways:\n\n(SITE), the directory for “ado-files” your site might have installed;\n(PLUS), the directory for “ado-files” you might have installed;\n(PERSONAL), the directory for “ado-files” you might have written;\n(OLDPLACE), the directory where Stata users used to save their personally written ado-files.\n\nThe ado-files you have just written or those created for this project can be found in the current directory (.).\nSpecific ‘ado-files’ you may ask to be made available in the server will be placed in your folder ‘/bplimext/projects/YOURPROJECTID/tools’. You should add this folder to your Stata ‘ado-files’ folder by executing the following command within Stata,\nsysdir set PERSONAL \"/bplimext/projects/YOURPROJECTID/tools\"\nYou may also edit your ‘profile.do’ file, located in your root folder, “/home/YOURPROJECTID/”, and add key instructions you may want to be executed every time you start Stata. The above instruction is one of such cases. You can create or edit the file ‘profile.do’ using ‘Do-file Editor’ within Stata (‘vi profile.do’ or KWrite are also a possibility).\nThe sysdir command within Stata will tell you where they are on your computer:\n\n\n\nStart a 'shell' in Linux and navigate to the directory of the “do-file” file that you want to run (ex: prog1.do)\n\ncd /bplimext/projects/I001_jdoe/work_area/\n\nYou might find it easier to use ‘Dolphin’ (= File Manager) to move over your folder structure. In this case, we recommend activating the ‘shell’ (= ‘Terminal’) associated with ‘Dolphin’\n\n\nuse Dolphin/File Manager\nclick ‘F4’ to activate the shell with Dolphin. Benefit: fast transition within folders and, at the same time, the ability to run shell commands\n\n\nCreate an ASCII file named, e.g., ‘batch_prog1’\nInside the file, write just a line with the execution command you would type in the ‘shell’; e.g.,\n/bplimext/projects/I001_jdoe/stata-mp do\n/bplimext/projects/I001_jdoe/work_area/prog1.do\nYou can use, for example, the command line app ‘vi’ to create the batch file\n\n\n\nThe batch file can also be created using apps like ‘kwrite’ or Stata ‘do file editor’\n\n\nor\n\n\nYou may add the extension ‘.txt’ to the name of the batch file, as sometimes Stata doeditor does not ‘see’ the file ‘batch’, while it ‘sees’ ‘batch.txt’\nOnce the batch file is created, one runs the .do file in batch mode by typing in the ‘Terminal’:\nat now -f batch.txt\nType ‘man at’ to see a further option of the command ‘at’; e.g., one could type\nat now + 5 hours -f batch.txt\n\nor\n`at now + 4 minutes -f batch_prog1`\nto run the Stata program within 5 hours or 4 minutes from now, respectively. ‘man’ is the help function in Linux\n\nType ‘top’ in the shell/Terminal to confirm the program is running\nUnder ‘top’ type ‘i’ to hide irrelevant processes (show less output)\nTo kill a running process with ‘top’ press ‘k’, for ‘kill’, write &gt; the process number and then type ‘9’. The process number is &gt; identified in the first column as PID\nTo get out of the top, type ‘q’\nUseful features of the command ‘at’:\n\n\n‘atq’: use it to see programs in the batch queue (an ‘=’ sign indicates the program is running; an ‘a’ indicates it is in the queue and we see the time when it will be executed)\n‘atrm #’: remove a batch from the batch queue\none can see how the batch is running by typing\ntail --f logcrc_may21.log\n\nIt allows you to see an updated version of the last lines of the log; i.e., it updates each time Stata changes the log. A key advantage of tail is that it does not interfere with the log file. Namely, it does not write over it.\n\nAnother way to run a program in the background is by using the command ‘screen’\n\n\n‘screen’ is useful when one wants to run Stata in interactive mode and still guarantees that if the network connection goes down one does not lose the session. We can simply kill the ‘NoMachine’ session and recover it later by typing ‘screen --r’\nWe can run several instances of screen. If this is the case, after opening a new NoMachine session, we need to type in the Terminal shell ‘screen -d’ to identify the running background sessions. We can retrieve a particular session by knowing the ‘pid’ number and typing ‘screen -r 34176’"
  },
  {
    "objectID": "External_Server_Guide.html#r",
    "href": "External_Server_Guide.html#r",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "3.2 R",
    "text": "3.2 R\n\nAs with Stata, R can be accessed in interactive graphical or non-graphical modes.\n\n\nInteractive non-graphical mode: go to the RedHat symbol and type `R’ in the Search box\n\n\n\nAlternatively, you can open a Terminal and type\n\n\nR\n\n\nPlease make sure R is in your PATH; type $PATH in the Terminal. If this is not the case, type PATH=$PATH:/usr/bin/\n\n\nUsing RStudio.\n\n\nOpen a Terminal and type\n\n\nrstudio\n\n\nPlease make sure RStudio is in your PATH; type $PATH in the Terminal. If this is not the case, type\n\n\nPATH=$PATH:/opt/bplimext/R/usr/lib64/rstudio/bin/\n\n\nIn case you face difficulties opening/saving files in RStudio, please open a Terminal and type\n\n\n/bplimext/scripts/wrappers/R.sh\n\nIMPORTANT: do not save your workspace image in your home folder (Save workspace image? [y/n/c]). If you want to keep the workspace file save it in your project folder under work_area.\nRStudio Font Type: please make sure you are not using Font Type Courier (Menu Tools, Global Options, Appearance …)"
  },
  {
    "objectID": "External_Server_Guide.html#python",
    "href": "External_Server_Guide.html#python",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "3.3 Python",
    "text": "3.3 Python\n\nOpen a Terminal and type\n\n\npython3"
  },
  {
    "objectID": "External_Server_Guide.html#julia",
    "href": "External_Server_Guide.html#julia",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "3.4 Julia",
    "text": "3.4 Julia\n\n3.4.1 Alternative A\n\nOpen a Terminal and type (julia is located in /opt/bplimext/julia/lib/, you can add it to your PATH)\n\n\njulia\n\n\nUse Atom: open a Terminal and type\n\n\natom\n\n\n\n3.4.2 Alternative B: using a container (see the discussion in the Appendix)\n\nRequest a container with Julia for your project\n\n\nThe container will be in the folder tools inside the project folder\n\n\nAdvantages: you can build a Julia setup fine-tuned to your project, including the definition of Julia’s version and packages"
  },
  {
    "objectID": "External_Server_Guide.html#updates-to-the-commands-and-packages-list",
    "href": "External_Server_Guide.html#updates-to-the-commands-and-packages-list",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "3.5 Updates to the commands and packages list",
    "text": "3.5 Updates to the commands and packages list\nAdditional commands/packages or updates to the existing ones have to be requested from BPLIM’s Team."
  },
  {
    "objectID": "External_Server_Guide.html#build-a-container-to-fine-tune-your-statistical-packages",
    "href": "External_Server_Guide.html#build-a-container-to-fine-tune-your-statistical-packages",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "3.6 Build a container to fine-tune your statistical packages",
    "text": "3.6 Build a container to fine-tune your statistical packages\nYou can use Singularity containers in the server. To do so, please send us the definition file so we build the image and put it in your working area. You can find detailed information on Singularity containers at https://sylabs.io/. We provide some notes in the Appendix"
  },
  {
    "objectID": "External_Server_Guide.html#shell_commands",
    "href": "External_Server_Guide.html#shell_commands",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.1 Basic ‘shell’ commands on Linux",
    "text": "8.1 Basic ‘shell’ commands on Linux\n\ntop: List the procedures that are being executed on the server\n\npress ‘i’ option to omit background processes;\nclicar press ‘h’ para help on top options ; ‘h’ &gt; option to obtain the top command help.\n\npwd: Show current working directory\ncd: Change directory\ncd /bplimext/projects/I001_jdoe/work_area/\n‘cd ~’ moves to your home folder\n\n\n\ncp: Copy file(s) to a given path\ncp prog1.do /bplimext/projects/I001_jdoe/results\n\n\n\nmv: Move file(s) or rename a file from a given path\nmv prog1.do /bplimext/projects/I001_jdoe/results\n\n\n\nrm: Delete a file\nrm /bplimext/projects/I001_jdoe/results/prog1.do\n\n\n\nmkdir: Creates a directory\nmkdir programs\n\n\n\nrmdir: Deletes a directory\nrmdir programs\n\n\n\nscreen: Switch between screen\nscreen top\n\n\n\nman: Show the manual page for the given command\nman ls\n\n\n\ndu -h: Check the information on disk usage of files and directories.\n\n\nThe “-h” option with “du” command provides results in “Human Readable Format”.\n\nEx: du /bplimext/projects/I001_jdoe/work_area/\n\ndf -h: Check disk space utilization and show the disk space &gt; statistics in “human readable” format.\nvi: View ‘ASCII’ files; e.g., log files\nghostscript: Preview files with the extensions of .eps and .pdf\n\n\nghostscript /bplimext/projects/I001_jdoe/results/file_name.pdf\n\n\nokular: View ‘PDF’\nfind: Find files\n\n\nStructure: find /path option filename\nfind . -name \"*.do\"\nSend the ‘find’ output to a file:\nfind . -name \"\\*.do\" &gt; find_results.txt\nLook for a particular string within the ‘find’ output:\nfind . -name \"\\*.do\" | grep \"analysis\"\nIdentify files with extension ‘.do’ that contain the word ‘graph’:\nfind . -name \"\\*.do\" -exec grep \"graph export\" '{}' \\; -print\n\n\npasswd: Change your password\nTo exit a program, type CTRL + C (‘CTRL + C’ kills a particular execution in the shell)"
  },
  {
    "objectID": "External_Server_Guide.html#using-the-vi-file-editor",
    "href": "External_Server_Guide.html#using-the-vi-file-editor",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.2 Using the ‘vi’ file editor",
    "text": "8.2 Using the ‘vi’ file editor\n\nIn the shell type ‘vi batch1.txt’\nThese are the main shortcut keys\n\n‘i’ insert text\n‘ESC’ key get out of the ‘insert’ mode\n‘x’ delete specific characters\n‘dd’ delete a full line\n‘10 dd’ delete 10 lines\n‘yy’ copy lines\n‘p’ paste lines\n‘SHIFT + G’ go to the last line\n‘gg’ goes to the first line\n‘ESC + q!’ exit ‘vi’ without writing\n‘w!’ write and replace the file\n‘ESC + q’ exit the ‘vi’ session\nCheck, for example, https://www.cs.colostate.edu/helpdocs/vi.html\n\nMuch easier solution: call ‘gedit’ file editor\nLinux commands I have to add to the manual\n‘CTRL + R’: allows me to recover a previous command\nvi .bash_history"
  },
  {
    "objectID": "External_Server_Guide.html#password",
    "href": "External_Server_Guide.html#password",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.3 External server’s password requirements",
    "text": "8.3 External server’s password requirements\n\n\n\n\n\n\n\n\nRule\nValue\nNotes \n\n\nMaximum Password Lifetime\n60 days\nAfter 60 days the password will expire and has to be changed in the next login. The password can be changed at any moment using: (1), “All Applications | Settings | System Settings – Account Details”, click “Change Password”; or, (2), in the ‘Shell’ type ‘passwd’\n\n\nMinimum Number of Character Classes\n4\nYou should include at least 4 classes of characters in the password. For example, small letters, capital letters, numbers and punctuation marks.\nThere are a total of five classes:\n\n1. Capital letters : A-Z\n2. Small letters: a-z\n3. Numbers: 1-9\n\n\n\n\n\n\n4. Punctuation marks: &lt;space&gt; ! % & ( ) * + . , { } [ ] ~ \" # $ ' - / \\ ^ _ ` |\n5. Characters above 127 (0x7F): marked characters (ã, á, ä, à, etc.); symbols (@, £, §, º, ª, «, », etc.)\n\nNumber of characters: by using the same character 3 or more times may imply the use of an additional class (it is highly recommended that you do not use consecutively the same character more than 2 times)\n\n\nMinimum Length of Password\n8\nThe minimum size of the password is 8 characters (it may be higher in case you repeat characters)\n\n\nPassword History\n7\nOne cannot use a password defined in the previous set of 7 passwords\n\n\nMaximum Consecutive Failures\n6\nIf the user fails 6 consecutive times the password the account will be locked for the time defined in “Lockout Time”\n\n\nFail Interval\n60 sec.\nTime interval for attempts to enter a password to be considered consecutive. If more than 60 seconds have elapsed since the last attempt, consecutive attempts are no longer considered, ie the number of failures, according to the requirement \"Maximum Consecutive Failures\" becomes one.\n\n\nLockout Time\n600 sec.\nTime (10 minutes) during which the account will be locked if the maximum number of failed attempts is reached."
  },
  {
    "objectID": "External_Server_Guide.html#install_nomachine",
    "href": "External_Server_Guide.html#install_nomachine",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.4 Download, install and configure NoMachine client",
    "text": "8.4 Download, install and configure NoMachine client\nStep 1: go to the link below and use the credentials provided by BPLIM to access the site. Note: sometimes the internet provider, e.g., a University, may block access to this particular website. Please check with your provider in case you get an error while trying to use the link.\nhttps://www.bportugal.pt/webdrive/index.php/s/irAzxZmir8KHyzD/authenticate\n\nStep 2: download the file with an extension compatible with your OS (Operation System)\n\nStep 3: install ‘NoMachine’\n\n\n\n\n\n\n\n\nStep 4: reboot your computer\n\nStep 5: NoMachine client access configuration\nStep 5.1: start ‘NoMachine’ and create a new connection\n\n\n\nStep 5.2: Choose ‘NX protocol’\n\n\n\nStep 5.3: Define the ‘Host’ as bplimexterno.bportugal.pt, ‘Port’ 4000\n\nClick ‘Use UDP communication for multimedia data’\n\nStep 5.4: Use password authentication, with or without proxy, depending on the instructions of the network administrator/user 's computer support, with the name “BPLIM-LabInvestMicrodados Banco de Portugal”.\n\nStep 5.5: Do not use a ‘proxy’\n\nStep 5.6: Define a name for the connection\n\nStep 5.7: Once the entry for bplimexterno.bportugal.pt has been created, connect:\n\n\n\n\n\nStep 5.8: Before the first effective connection, it may be necessary to accept the certificate from bplimexterno.bportugal.pt\nThe Investigator should verify that the \"fingerprint\" (verification code) is:\nSHA256 ED 1B D9 E2 C2 F8 C6 08 1A 53 5F 97 DA 71 77 D9 D2 EE 7A 5F 9C 35 87 B3 19 F4 7E A1 CB 2C 68 0B\n\n\n\n\n\nStep 5.9: Connect with the UserID (case sensitive) and password provided by Banco de Portugal:\n\nStep 5.10: After the first successful login, it is necessary to change the password, which must comply with the Password Policy defined above.\nIf the new password does not comply with the Password Policy, the original password provided by the Banco de Portugal will be re-requested. See Appendix 3 for details.\nThe NoMachine client does not tell you why the new password was not accepted – it is the responsibility of the user to verify that the new password is in compliance.\n\nStep 5.11: Upon login success, the following screens should appear\n\n\nOnce logged in and with access to a KDE session, click on the upper right corner of the KDE desktop, as shown below, to access the menu and then expand the screen as exemplified for greater ease of use.\nStep 5.12: You should see the following screen.\n\nStep 5.13: Click ‘Display’\n\nStep 5.14: Click ‘Fit to window’ and click ‘Done’"
  },
  {
    "objectID": "External_Server_Guide.html#frequently-asked-questions",
    "href": "External_Server_Guide.html#frequently-asked-questions",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.5 Frequently Asked Questions",
    "text": "8.5 Frequently Asked Questions\n\n\nMac users are not able to install NoMachine, receiving the following message\n\n\n\n\nPlease check if your Mac OSX is updated. Temporary solution: download NoMachine Enterprise Client from the official website, and run the installation file:\nhttps://www.nomachine.com/download-enterprise#NoMachine-Enterprise-Client\n\nNoMachine authentication failure\n\n\n\n\n\n\nIn some cases, it occurs due to a different keyboard layout. For example, if you have a Portuguese keyboard, but the website assumes a US keyboard, and your password contains a symbol like ‘ç’ then you will get a “wrong password” message. Please check the keyboard layout that is active when you type the password. Alternatively, change the password after the first login with NoMachine. Use linux’s command ‘passwd’.\nLogin fails, and the system shows the message: \"Could not connect to the server. Error is 138: Connection is timed out\" Please check if your network has a strict firewall; e.g., some researchers are not able to reach BPLIM’s server within their University network. Please check if in a different location, like at home, the connection works.\n\n\nUser pressed ‘Lock’ instead of ‘Log out’ and the unlock/password does not work:\n\n\nCheck if the keyboard settings are correct (e.g., PT or UK)\nClose the ‘NoMachine’ connection and start a new one. Before the last step -before the 'Login’- right-click and choose ‘Logout’. Double-click for the new connection\n\n\n“Cannot see the screen in NoMachine” (see image below)\n\n\n\n\n\nOPTION A: move your mouse on top the upper right corner of NoMachine, you should see a “folded like sheet”, left-click your mouse, go to ‘Display’, ‘Change settings’, and click in ‘Disable client side hardware decoding’\n\n\n\nOPTION B: Close the ‘NoMachine’ connection and start a new one. Before the last step -before the 'Login’- right click and choose ‘Logout’. Double-click for the new connection\n“Error: Parameter ‘agentm_display’ has bad value” (see image below)\n\n\n\n\n\nYour home folder is full (/home/USER_LOGIN): Do not save files in your home folder\nAsk BPLIM Staff to empty space in your home folder\n\n\nSession is frozen\n\n\nGo to NoMachine first screen and double-click in the following icon\n\n\n\nright-click on the icon below and choose “Terminar sessão”\n\n\n\nVisualizing tables\n\n\nIn case you want to see the pdf of tables you have exported to you can create a generic tex file, main.tex, with the following content:\n\n\n\\documentclass{article}\n\\begin{document}\n\\input{your_table.tex}\n\\end{document}\n\n\nwhere your table is ‘your_table.tex’. The tex file can be compiled in the Terminal by typing pdflatex main.tex."
  },
  {
    "objectID": "External_Server_Guide.html#version-control",
    "href": "External_Server_Guide.html#version-control",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.6 Version control",
    "text": "8.6 Version control\nThe server runs GitLab. If you need to use Git for your projects, please send your request to BPLIM (bplim@bportugal.pt).\nIn case you want to use Git you should request it from BPLIM (bplim@bportugal.pt).\n\nWikipedia:\n``Git is a distributed version-control system for tracking changes in any set of files, originally designed for coordinating work among programmers cooperating on source code during software development. Its goals include speed, data integrity, and support for distributed, non-linear workflows’’\n\nFirst steps\n\nFirst, authenticate using an ssh-key. Open a Terminal in your home folder\n\n  cd ~\nand type:\n  ssh-keygen -t rsa -C \"BPLIM git\"\n  cat ~/.ssh/id_rsa.pub\n\nSecond, after generating your SSH key, you’ll need to select the text of the key in your terminal. You can usually do this by clicking and dragging your mouse over the key text. Once the key is highlighted, right-click on the selection and choose ‘Copy’ to copy the resulting key to your clipboard.\nThird, open Firefox (go to the RedHat icon and type Firefox in the search box) and navigate to https://vxpp-bplimgit.bplim.local/\n\n\nOnce you’ve navigated to the website, use your credentials for the external server to log in.\n\nOnce logged in, navigate to your profile. In the upper-right corner of the webpage, you will find the Settings option.\n\n\nNow, on the left-side bar, click in SSH Keys\n\nand paste the contents of the clipboard in the text box on the top right corner under Key.\n\nGive a title, e.g., “BPLIM git”, and click in Add key.\n\nGo to Projects\n\n\nand create a New project, e.g., scripts_P999, where P999 is your_project_ID_number\n\nTo use git, it is necessary to modify or create the .gitconfig file in your user’s home directory. You can use KWrite (click in the RedHat icon and search for KWrite) to edit/create the file. The file should have the following format. In this file, you can adapt the name and replace ‘investa’ with your own user.\n  [cola]\n          spellcheck = false  \n  [user]\n          name = Investigador A\n          email = investa@sxpe-bplim01.bplim.local\n  [gui]\n          editor = kwrite\n\nYou can clone the project by opening a Terminal and moving to your work_area:\n\n  cd /bplimext/projects/your_project_ID/work_area/\nand typing\n  git clone git@vxpp-bplimgit.bplim.local:investa/scripts_P999.git\n\nAdd the file .gitignore available in folder tools of your project:\n\n  cd scripts_P999\n  cp /bplimext/projects/your_project_ID/tools/.gitignore .\n\nDo your first commit & push\n\n  git add *\n\n  git commit -a -m \"First\"\n\n  git push\n\nTo use the version control system effectively, please place all your scripts and code files in the folder named ‘scripts_P999’. This organization is important for maintaining a structured and efficient workflow with the version control system."
  },
  {
    "objectID": "External_Server_Guide.html#containers",
    "href": "External_Server_Guide.html#containers",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.7 Containers",
    "text": "8.7 Containers\n\n\n8.7.1 Build your container\n\nYou can write a script to build your container using our definition file template available at our GitHub repository:\n\n\nBPLIM_container_PROJECT_ID.def\n\n\nIn this template we setup a machine running Ubuntu 20.04, R 4.2 and RStudio.\nYou can add your packages in line 89 within c(); e.g.,\n\n\nc(\"tidyverse\",\"haven\")\n\n\nTest your script and build the container using SylabsCloud (you can use your GitHub account to login)\nClick in ‘CREATE’\n\n\n\nIn the following step upload your ‘.def’ file or copy/paste its contents in the Text box:\n\n\n\nSylabs runs a first test on the validity of your script and releases the button ‘Build’ (click on it)\nFollow the outcome at the bottom of the screen and check for possible error messages\nOnce you succeed in building the container, you can send us the definition file with your changes\n\n\n\n8.7.2 Use the container in BPLIM’s server\n\nOpen a Terminal\nMove to your project’s folder\n\n\ncd /bplimext/projects/YOURPROJECTID/tools/containers\n\n\nStart the container by typing\n\n\nsingularity shell YOURPROJECTID.sif\n\n\nThe prompt of the Terminal will show: Singularity\nStart RStudio by typping rstudio (small caps)\n\n\n\nOnce inside RStudio you have access to the original folder structure of your project"
  },
  {
    "objectID": "External_Server_Guide.html#jupyter-lab",
    "href": "External_Server_Guide.html#jupyter-lab",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "8.8 Jupyter Lab",
    "text": "8.8 Jupyter Lab\nExplore Jupyter lab:\n\n“JupyterLab is a web-based interactive development environment for Jupyter notebooks, code, and data. JupyterLab is flexible: configure and arrange the user interface to support a wide range of workflows in data science, scientific computing, and machine learning. JupyterLab is extensible and modular: write plugins that add new components and integrate with existing ones.”\n\nStart Jupyter Lab by typing:\n\njupyter lab --browser=firefox\n\nSample session:"
  },
  {
    "objectID": "External_Server_Guide.html#footnotes",
    "href": "External_Server_Guide.html#footnotes",
    "title": "Banco de Portugal’s Microdata Research Laboratory: External Server Guide",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nDolphin is an intuitive and easy-to-use file manager. You can use it, for example, to browse the directory, to create or delete files/directories (by using the right mouse button). For more information about Dolphin, please visit: https://userbase.kde.org/Dolphin .↩︎\nIn case ‘xstata17mp.sh’ does not launch Stata please see ‘Section 3’.↩︎\nClick on the cross button at the upper right corner to close.↩︎\nNote that before exiting the server, you need to make sure that all active programs have been closed (unless they have been launched in batch mode). Running programs in batch mode is justified for procedures that require high computational resources, intense calculation and/or long processing time.↩︎\nThe ’shell’ supports the commands in Linux operating system (some are disabled).↩︎\nThe version of Stata on the server has the same features as the Stata on Windows or Mac. By default when the Stata starts in this way the \"working directory\" active becomes your folder \"work_area\".↩︎\nYou may only remove text files that do not contain data or results that allow identification. For all the graphs you request as an output you must provide the corresponding Table to replicate it. You may only export graphs in .PNG format (no vector graph is allowed).↩︎"
  }
]